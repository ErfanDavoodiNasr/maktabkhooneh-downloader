# ุฏุงูููุฏุฑ ูฺฉุชุจโุฎููู (Maktabkhooneh Downloader)
ุงุจุฒุงุฑ ุฎุท ูุฑูุงู ุจุฑุง ุฏุงูููุฏ ูุฏููุง ูุงุจูโุฏุณุชุฑุณ ุฏูุฑูโูุง [maktabkhooneh.org](https://maktabkhooneh.org/) ุจูโููุฑุงู ุฒุฑููุณ ู ูุงูโูุง ุถููู.

ููุท ูุญุชูุง ุฑุง ุฏุงูููุฏ ฺฉูุฏ ฺฉู ูุงูููุงู ุจู ุขู ุฏุณุชุฑุณ ุฏุงุฑุฏ.

## โก ุดุฑูุน ุณุฑุน
```bash
# 1) ูุงู config.json ุขูุงุฏู ุงุณุชุ ููุท auth.email ู auth.password ุฑุง ูพุฑ ฺฉู

# 2) ูพุดโููุงุด ุญุฌู (ุจุฏูู ุฏุงูููุฏ ูุงูุน)
node download.mjs /python --dry-run

# 3) ุฏุงูููุฏ ูุงูุน
node download.mjs /python
```

## โ ูพุดโูุงุฒูุง
- Node.js 18 ุง ุจุงูุงุชุฑ
- ุญุณุงุจ ฺฉุงุฑุจุฑ ูฺฉุชุจโุฎููู

## ๐งญ ุณุงุฎุชุงุฑ ุงุณุชูุงุฏู
1. ุชูุธูุงุช ุฑุง ุฏุฑ `config.json` ุจฺฏุฐุงุฑ.
2. ุงฺฏุฑ ุฎูุงุณุช ูุจู ุฏุงูููุฏ ุญุฌู ุฑุง ุจุจู: `--dry-run`.
3. ุฏุงูููุฏ ุฑุง ุงุฌุฑุง ฺฉู.
4. ุงฺฏุฑ ูุดุณุช ูููุถ ุดุฏ: `--force-login`.

## โ๏ธ ฺฉุงููฺฏ (`config.json`)
ูุงู ูพุดโูุฑุถ ุจุฑูุงูู `config.json` ุฏุฑ ุฑุดู ูพุฑูฺู ุงุณุช.

ุงฺฏุฑ ูุงู ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏุ ุจุฑูุงูู ุจุง ูพุดโูุฑุถโูุง ุงุฌุฑุง ูโุดูุฏ. ุจุฑุง ูุงู ุณูุงุฑุด:
```bash
node download.mjs --config ./my-config.json
```

### ุณุงุฎุชุงุฑ ฺฉุงูู ฺฉุงููฺฏ
```json
{
  "course": {
    "baseUrl": "https://maktabkhooneh.org/course/"
  },
  "auth": {
    "email": "you@example.com",
    "password": "Secret123",
    "cookie": "",
    "cookieFile": "",
    "sessionCookie": "",
    "sessionUpdated": ""
  },
  "runtime": {
    "sampleBytes": 0,
    "retryAttempts": 4,
    "requestTimeoutMs": 30000,
    "readTimeoutMs": 120000
  },
  "defaults": {
    "chapter": "",
    "lesson": "",
    "dryRun": false,
    "forceLogin": false,
    "verbose": false
  }
}
```

### ูุนู ุจุฎุดโูุง
- `course.baseUrl`: ุขุฏุฑุณ ูพุงู ุฏูุฑูโูุง (ูพุดโูุฑุถ: `https://maktabkhooneh.org/course/`)
- slug ุฏูุฑู ููุท ุงุฒ CLI ฺฏุฑูุชู ูโุดูุฏ (ูุซุงู: `node download.mjs /python`)
- `auth.email` / `auth.password`: ูุงฺฏู ุจุง ุญุณุงุจ ฺฉุงุฑุจุฑ.
- `auth.cookie` / `auth.cookieFile`: ุฌุงฺฏุฒู ูุงฺฏู ุจุง ฺฉูฺฉ ุฏุณุช.
- `auth.sessionCookie`: ูุดุณุช ุฐุฎุฑูโุดุฏูโ ุฎูุฏฺฉุงุฑ ุจุนุฏ ุงุฒ ูุงฺฏู ูููู.
- `runtime.*`: ุชูุธูุงุช ุดุจฺฉู ู ูููููโฺฏุฑ.
- `defaults.*`: ูพุดโูุฑุถโูุง CLI (ูุซู dry-runุ chapterุ lesson).

## ๐ ูุงฺฏู ู ูุดุณุช
ุฏู ุฑูุด ูุงฺฏู ุฏุงุฑ:
1. ุงูู/ูพุณูุฑุฏ (`auth.email`, `auth.password`) - ุฑูุด ูพุดููุงุฏ
2. ฺฉูฺฉ ุฏุณุช (`auth.cookie` ุง `auth.cookieFile`)

ุจุนุฏ ุงุฒ ูุงฺฏู ููููุ ูุดุณุช ุฏุงุฎู `auth.sessionCookie` ุฐุฎุฑู ูโุดูุฏ ุชุง ุงุฌุฑุง ุจุนุฏ ูุงุฒ ุจู ูุงฺฏู ูุฌุฏุฏ ูุฏุงุดุชู ุจุงุดุฏ.

ุงฺฏุฑ ูุดุณุช ูููุถ ุดุฏ:
```bash
node download.mjs --force-login
```

## โถ๏ธ ุฏุณุชูุฑุงุช ุฑุงุฌ
### 1) ุฏุงูููุฏ ุจุง slug ูุณุชูู (ุจุฏูู URL ฺฉุงูู)
```bash
node download.mjs /python
```

### 2) ุฏุงูููุฏ ุจุง URL ูุณุชูู (ุงุฎุชุงุฑ)
```bash
node download.mjs "https://maktabkhooneh.org/course/<slug>/"
```

### 3) ูพุดโููุงุด ูุจู ุงุฒ ุฏุงูููุฏ (ุจุฏูู ุฏุงูููุฏ ูุงูุน)
```bash
node download.mjs /python --dry-run
```

### 4) ุฏุงูููุฏ ุงูุชุฎุงุจ ูุตู/ูุณูุช
```bash
# ููุท ูุตู 2
node download.mjs --chapter 2

# ูุตู 2 ู ูุณูุชโูุง 2 ุชุง 5 ู 9
node download.mjs --chapter 2 --lesson 2-5,9

# ฺูุฏ ูุตู
node download.mjs --chapter 1,3
```

### 5) ุญุงูุช ูููููโฺฏุฑ (Sample)
```bash
node download.mjs --sample-bytes 65536 --verbose
```

## ๐ Dry Run ฺู ฺุฒ ูุดุงู ูโุฏูุฏุ
ุฏุฑ ุญุงูุช `--dry-run`:
- ูฺ ูุงู ุฏุงูููุฏ ููโุดูุฏ.
- ูพูุดู/ูุงู ุฎุฑูุฌ ุณุงุฎุชู ููโุดูุฏ.
- ุจุฑุง ูุฑ ูุณูุช: ุญุฌู ุชูุฑุจ ูุฏู + ุฒุฑููุณ + ุถููู ู ูุณุฑ ุฎุฑูุฌ ูุดุงู ุฏุงุฏู ูโุดูุฏ.
- ุจุฑุง ูุฑ ูุตู: ุฌูุน ุชูุฑุจ ูุตู ูุดุงู ุฏุงุฏู ูโุดูุฏ.
- ุฏุฑ ุงูุชูุง: ุฌูุน ฺฉู ุชูุฑุจ ุฏูุฑู ูุดุงู ุฏุงุฏู ูโุดูุฏ.

ูฺฉุชู: ุงุนุฏุงุฏ ุจุฑ ุงุณุงุณ `HEAD/Range` ุณุฑูุฑ ุชุฎูู ูุณุชูุฏ ู ููฺฉู ุงุณุช ฺฉู ุงุฎุชูุงู ุฏุงุดุชู ุจุงุดูุฏ.

## ๐ฏ ูุฑูุช ูุนุชุจุฑ `--chapter` ู `--lesson`
- ุนุฏุฏ ุชฺฉ: `2`
- ูุณุช: `1,3,7`
- ุจุงุฒู: `2-5`
- ุชุฑฺฉุจ: `2-5,9`

## โป๏ธ Retry ู Timeout
ูพุดโูุฑุถโูุง:
- `retryAttempts`: `4`
- `requestTimeoutMs`: `30000`
- `readTimeoutMs`: `120000`

ููููู ุชุบุฑ ุฏุฑ ฺฉุงููฺฏ:
```json
{
  "runtime": {
    "retryAttempts": 5,
    "requestTimeoutMs": 45000,
    "readTimeoutMs": 180000
  }
}
```

## โจ ุงูฺฉุงูุงุช
- ุฏุงูููุฏ ูุฏู + ุฒุฑููุณ + ุถููู ฺฉูุงุฑ ูู
- ุงูุชุฎุงุจ ุจูุชุฑู ฺฉูุช ููุฌูุฏ
- Resume ุฏุงูููุฏ ูพุณ ุงุฒ ูุทุน ุดุฏู
- ููุงุฑ ูพุดุฑูุช ุฏูู (ุฏุฑุตุฏุ ุญุฌูุ ุณุฑุนุช)
- Dry Run ุจุง ุจุฑุขูุฑุฏ ุญุฌู ูุตู/ฺฉู
- ุฎุทุงูุง ูุงุจูโุงูุฏุงู (ุนูุช + ุฏุณุชูุฑ ุจุนุฏ)

## ๐ ุฎุฑูุฌ ุฏุงูููุฏ
ุชูุงู ูุงูโูุง ุฏุฑ ูุณุฑ ุฒุฑ ุฐุฎุฑู ูโุดููุฏ:
```text
download/<ูุงู ุฏูุฑู>
```

## ๐ ูฺฉุงุช ุงููุช
- `config.json` ููฺฉู ุงุณุช ุดุงูู ูพุณูุฑุฏ ุง ฺฉูฺฉ ูุดุณุช ุจุงุดุฏุ ุขู ุฑุง ุนููู ูฺฉูุฏ.

## ๐ ุฎุทุงูุง ุฑุงุฌ
- `401 Unauthorized`: ูุดุณุช ูููุถ/ูุงูุนุชุจุฑ ุงุณุช.
  - ุฑุงูโุญู: `node download.mjs --force-login`
- `403 Forbidden`: ุฏุณุชุฑุณ ุญุณุงุจ ุจู ุฏูุฑู ฺฉุงู ูุณุช.
  - ุฑุงูโุญู: ุจุง ุญุณุงุจ ุฏุฑุณุช ูุงฺฏู ฺฉูุฏ.
- `Invalid course URL`: ููฺฉ ุฏูุฑู ูุงุฏุฑุณุช ุงุณุช.
  - ุฑุงูโุญู: ูุฑูุช `https://maktabkhooneh.org/course/<slug>/`
- `COURSE_INPUT`: slug ุง URL ุฏูุฑู ูุดุฎุต ูุดุฏู ุงุณุช.
  - ุฑุงูโุญู: slug ุฑุง ุฏุฑ CLI ุจุฏูุฏ. ูุซุงู: `node download.mjs /python`

## ๐ค ููุณูุฏู
- [NabiKAZ](https://github.com/NabiKAZ)
- X: [x.com/NabiKAZ](https://x.com/NabiKAZ)
- Telegram: [t.me/BotSorati](https://t.me/BotSorati)

## ๐ ูุงุณูุณ
GPL-3.0 - ูุชู ฺฉุงูู ุฏุฑ [LICENSE](./LICENSE)
